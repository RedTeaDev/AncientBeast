(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{322:function(e,t,r){"use strict";r.r(t);var i=r(0),a=r(120),n=r(24),s=r(48),c=r(8),o=r(989);t.default=function(e){e.abilities[14]=[{trigger:"onCreatureSummon onDamage onHeal",require:function(){return!0},activate:function(){if(!this.creature.dead){var t=this.isUpgraded()?5:7,r=Math.floor(this.creature.health/t*3),i=r==this._lastBonus;this._lastBonus=r;for(var a=["pierce","slash","crush"],n={},s=0;s<a.length;s++){n[a[s]]=r}this.creature.replaceEffect(new o.a("Gooey Body",this.creature,this.creature,"",{alterations:n,deleteTrigger:"",stackable:!1,noLog:i},e)),i||e.log("%CreatureName"+this.creature.id+"% receives "+r+" pierce, slash and crush")}},_lastBonus:0},{trigger:"onQuery",require:function(){return this.testRequirements()},query:function(){var t=this,r=[[1,1],[1,1,1],[1,1]],i=this.creature.y%2!=0?-1:0,a=[e.grid.getHexMap(this.creature.x+1+i,this.creature.y-2-1,0,!1,r),e.grid.getHexMap(this.creature.x+2+i,this.creature.y+-1,0,!1,r),e.grid.getHexMap(this.creature.x+1+i,this.creature.y+2+-1,0,!1,r),e.grid.getHexMap(this.creature.x-1+i,this.creature.y+2+-1,0,!1,r),e.grid.getHexMap(this.creature.x-2+i,this.creature.y+-1,0,!1,r),e.grid.getHexMap(this.creature.x-1+i,this.creature.y-2-1,0,!1,r)];a.sort((function(e,t){return e.length<t.length})),e.grid.queryChoice({fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){t.animation.apply(t,arguments)},team:n.a.Both,id:this.creature.id,requireCreature:!1,choices:a})},activate:function(t){this.end();var r=this.getTargets(t),s=i.extend({},this.damages);if(this.isUpgraded())for(var c in s)({}).hasOwnProperty.call(s,c)&&(s[c]*=2);for(var o=0,u=0;u<r.length;u++)if(void 0!==r[u]){var h=this.damages;Object(n.b)(this.creature,r[u].target,n.a.Enemy)&&(h=s);var f=new a.a(this.creature,h,r[u].hexesHit,[],e);o+=r[u].target.takeDamage(f).kill+0}o>1&&this.creature.player.score.push({type:"combo",kills:o})}},{trigger:"onQuery",require:function(){return this.testRequirements()},query:function(){var t=this,r=this.creature,i=this.isUpgraded()?3:1,a=r.hexagons.concat(e.grid.getFlyingRange(r.x,r.y,i,r.size,r.id));e.grid.queryHexes({fnOnConfirm:function(){t.animation.apply(t,arguments)},size:r.size,flipped:r.player.flipped,id:r.id,hexes:a,ownCreatureHexShade:!0,hideNonTarget:!0})},activate:function(t){this.end();var r=this,i=function(){var i=new o.a("Royal Seal",r.creature,t,"onStepIn",{requireFn:function(){var e=this.trap.hex.creature;return e&&e.type!==this.owner.type},effectFn:function(e,t){0===this.trap.turnLifetime&&(t.remainingMove=0,this.trap.turnLifetime=1,this.trap.ownerCreature=t)},alterations:{moveable:!1},deleteTrigger:"onStartPhase",turnLifetime:1},e);t.createTrap("royal-seal",[i],r.creature.player,{ownerCreature:r.creature,fullTurnLifetime:!0}).hide()};t.x!==this.creature.x||t.y!==this.creature.y?this.creature.moveTo(t,{callback:function(){e.activeCreature.queryMove(),i()},ignoreMovementPoint:!0,ignorePath:!0,overrideSpeed:200,animation:"push"}):i()}},{trigger:"onQuery",directions:[1,1,1,1,1,1],_targetTeam:n.a.Enemy,require:function(){return!!this.testRequirements()&&!!this.testDirection({team:this._targetTeam,directions:this.directions})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:this.creature.id,requireCreature:!0,x:r.x,y:r.y,directions:this.directions})},activate:function(t,r){this.end();var i=c.e(t).creature,n=t[0].creature===i?{sonic:20,crush:10}:{sonic:20},o=[];switch(r.direction){case 0:o=e.grid.getHexMap(i.x,i.y-8,0,i.flipped,s.f).reverse();break;case 1:o=e.grid.getHexMap(i.x,i.y,0,i.flipped,s.r);break;case 2:o=e.grid.getHexMap(i.x,i.y,0,i.flipped,s.e);break;case 3:o=e.grid.getHexMap(i.x,i.y,-4,i.flipped,s.f);break;case 4:o=e.grid.getHexMap(i.x,i.y,0,!i.flipped,s.r);break;case 5:o=e.grid.getHexMap(i.x,i.y-8,-4,i.flipped,s.e).reverse()}var u=o.length>1&&o[1].isWalkable(i.size,i.id,!0)&&i.stats.moveable;this.isUpgraded()&&!u&&(n.sonic+=10);var h=new a.a(this.creature,n,1,[],e);i.takeDamage(h,{ignoreRetaliation:!0}).kill||u&&i.moveTo(o[1],{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){e.activeCreature.queryMove()},animation:"push"})}}]}},989:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(3),a=r.n(i),n=r(4),s=r.n(n),c=r(0),o=r(5),u=function(){function e(t,r,i,n,s,o){a()(this,e),this.id=o.effectId++,this.game=o,this.name=t,this.owner=r,this.target=i,this.trigger=n,this.creationTurn=o.turn;var u=c.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},s);c.extend(this,u),o.effects.push(this)}return s()(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof o.a&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);