(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{333:function(e,t,r){"use strict";r.r(t);var i=r(39),a=r.n(i),n=r(85),s=r.n(n),c=r(42),o=r.n(c),u=r(120),h=r(24),f=r(48),d=r(8),g=r(989),m=r(14);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}t.default=function(e){e.abilities[6]=[{trigger:"onCreatureSummon onOtherCreatureSummon onOtherCreatureDeath",_buff:0,require:function(){if(this.creature.dead||this.creature.temp)return!1;var t=0;return e.creatures.forEach((function(e){"S"!=e.realm||e.dead||e.temp||(t+=2)})),t!=this._buff&&(this._buff=t,!0)},activate:function(){this.creature.facePlayerDefault();var t=0;this.isUpgraded()&&(t=this._buff),this.creature.replaceEffect(new g.a("Lamellar Body",this.creature,this.creature,"",{alterations:{defense:this._buff,frost:this._buff,regrowth:t},stackable:!1},e))}},{trigger:"onQuery",_directions:[0,1,0,0,1,0],_targetTeam:h.a.Enemy,_executeHealthThreshold:39,require:function(){if(!this.testRequirements())return!1;if(!this.atLeastOneTarget(this._getHexes(),{team:this._targetTeam})){if(!this.isUpgraded())return!1;if(!this.testDirection({team:this._targetTeam,directions:this._directions,distance:this.creature.remainingMove+1,sourceCreature:this.creature}))return!1}return!0},query:function(){var t=this,r=this.creature,i={fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,id:r.id,team:h.a.Enemy,requireCreature:!0};if(i.choices=this._getHexes().map((function(e){return[e]})),this.isUpgraded()){var a=e.grid.getDirectionChoices({flipped:r.player.flipped,team:this._targetTeam,requireCreature:!0,stopOnCreature:!0,sourceCreature:r,id:r.id,x:r.x,y:r.y,directions:this._directions,distance:r.remainingMove+1});i.choices=i.choices.filter((function(e){return!a.choices.some((function(t){return e.every((function(e){return t.includes(e)}))}))})),i.choices=[].concat(o()(i.choices),o()(a.choices))}e.grid.queryChoice(i)},activate:function(t,r){var i=this,a=i.creature;i.end(),t=d.g(t,r.direction);var n=d.e(t).creature;if(this._getHexes().some((function(e){var t;return(null===(t=e.creature)||void 0===t?void 0:t.id)===n.id})))i._damageTarget(n);else{d.c(t,!1,!0,a.id);var s=d.e(t),c=s.x+(4===r.direction?a.size-1:0);s=e.grid.hexes[s.y][c];var o=e.grid.getHexLine(n.x,n.y,r.direction);d.c(o,!1,!0,n.id),o=o.slice(0,t.length),a.moveTo(s,{overrideSpeed:100,callback:function(){var t=d.e(o);i._damageTarget(n).kill||(t?(r.direction===m.a.Left&&(t=t&&e.grid.hexes[t.y][t.x+n.size-1]),n.moveTo(t,{callback:function(){e.activeCreature.queryMove()},ignoreMovementPoint:!0,ignorePath:!0,animation:"push"})):e.activeCreature.queryMove())}})}},_damageTarget:function(t){var r,i=t.health<=this._executeHealthThreshold&&t.isFrozen(),a=i?{pure:t.health}:{crush:this.damages.crush,frost:this.damages.frost},n=new u.a(this.creature,a,1,[],e);return i?(this.game.UI.chat.suppressMessage(/is dead/i,1),(r=t.takeDamage(n)).kill&&(this.game.log("%CreatureName".concat(t.id,"% has been shattered!")),t.hint("Shattered","damage"))):r=t.takeDamage(n),r},_getHexes:function(){return this.creature.getHexMap(f.k)}},{trigger:"onQuery",_targetTeam:h.a.Enemy,_directions:[1,1,1,1,1,1],_distance:5,require:function(){return!!this.testRequirements()&&!!this.testDirection({sourceCreature:this.creature,team:this._targetTeam,directions:this._directions,distance:this._distance,optTest:this._confirmTarget})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,directions:this._directions,distance:this._distance,optTest:this._confirmTarget})},activate:function(t,r){var i=this,a=this.creature,n=d.e(t).creature;i.end();var c=e.animations.projectile(this,n,"effects_freezing-spit",t,r,52,-20),o=s()(c,2),h=o[0],f=o[1],g=Math.max(a.stats.frost-n.stats.frost,0),m=new u.a(i.creature,{frost:g},1,[],e);h.onComplete.add((function(){var t;this.destroy(),m.damages.frost>0&&(t=n.takeDamage(m)),n.freeze(i.isUpgraded()),t&&!t.kill&&(e.log("%CreatureName".concat(n.id,"% ").concat(i.isUpgraded()?"enters Cryostasis":"has been Frozen"," and cannot act")),n.hint(i.isUpgraded()?"Cryostasis":"Frozen"))}),f)},_confirmTarget:function(e){return e.isFatigued()}},{trigger:"onQuery",_directions:[0,1,0,0,1,0],_targetTeam:h.a.Enemy,require:function(){this.creature;return!!this.testRequirements()&&!!this.atLeastOneTarget(this._getHexes(),{team:this._targetTeam})},query:function(){var e=this,t=this.creature;this.game.grid.queryCreature({fnOnConfirm:function(){e.animation.apply(e,arguments)},team:this._targetTeam,id:t.id,flipped:t.flipped,hexes:this._getHexes()})},activate:function(t){var r=this.creature;this.end();var i=Math.max(r.level-t.level,0),n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.damages,{frost:this.damages.frost+i*this.bonus_damages.frost,pierce:this.damages.pierce+(this.isUpgraded()?i*this.bonus_damages.pierce:0)}),s=new u.a(r,n,1,[],e);t.takeDamage(s)},_getHexes:function(){var t=this.creature;return[].concat(o()(e.grid.getHexMap(t.x,t.y-4,2,!0,f.g)),o()(this.creature.getHexMap(f.g)))}}]}},989:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(3),a=r.n(i),n=r(4),s=r.n(n),c=r(0),o=r(5),u=function(){function e(t,r,i,n,s,o){a()(this,e),this.id=o.effectId++,this.game=o,this.name=t,this.owner=r,this.target=i,this.trigger=n,this.creationTurn=o.turn;var u=c.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},s);c.extend(this,u),o.effects.push(this)}return s()(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof o.a&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);