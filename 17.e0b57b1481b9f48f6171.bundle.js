(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{329:function(e,t,r){"use strict";r.r(t);var i=r(0),a=r(120),n=r(24),s=r(48),u=r(8),c=0,o=1,h=2;t.default=function(e){e.abilities[12]=[{trigger:"onCreatureMove onOtherCreatureMove",require:function(e){if(!this.testRequirements())return!1;if(this.creature===this.game.activeCreature)return!1;if(!e.creature)return!1;var t=[];if(e.creature===this.creature)t=this._detectFrontHexesWithEnemy();else if(Object(n.b)(e.creature,this.creature,n.a.Enemy)){var r=this._findEnemyHexInFront(e);r&&t.push(r)}return t.length&&this.timesUsedThisTurn<this._getUsesPerTurn()&&!this.creature.materializationSickness&&!this.creature.isFrozen()&&this._getHopHex()},activate:function(t){this.end(),this.creature.moveTo(this._getHopHex(),{callback:function(){e.activeCreature.queryMove()},ignorePath:!0,ignoreMovementPoint:!0})},_getUsesPerTurn:function(){return this.isUpgraded()?2:1},_getHopHex:function(){var e,t=this._detectFrontHexesWithEnemy();if(t.find((function(e){return e.direction===o}))||t.find((function(e){return e.direction===c}))&&t.find((function(e){return e.direction===h}))?e=this.creature.getHexMap(s.n)[0]:t.find((function(e){return e.direction===c}))?e=this.creature.getHexMap(s.b)[0]:t.find((function(e){return e.direction===h}))&&(e=this.creature.getHexMap(s.c)[0]),void 0!==e&&e.isWalkable(this.creature.size,this.creature.id,!0)||(e=this.creature.getHexMap(s.n)[0]),void 0===e||e.isWalkable(this.creature.size,this.creature.id,!0))return e},_findEnemyHexInFront:function(e){return this._detectFrontHexesWithEnemy().some((function(t){var r=t.hex;return e.creature===r.creature}))?e:void 0},_detectFrontHexesWithEnemy:function(){var e=this;return this.creature.getHexMap(s.h).reduce((function(t,r,i){return r.creature&&Object(n.b)(r.creature,e.creature,n.a.Enemy)&&t.push({direction:i,hex:r}),t}),[])}},{trigger:"onQuery",_targetTeam:n.a.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){var t=this,r=this.creature;e.grid.queryCreature({fnOnConfirm:function(){t.animation.apply(t,arguments)},team:this._targetTeam,id:r.id,flipped:r.player.flipped,hexes:r.adjacentHexes(1)})},activate:function(t){this.end();var r=this.damages;if(this.isUpgraded()&&t.isFrozen())for(var i in r={pure:0},this.damages)({}).hasOwnProperty.call(this.damages,i)&&(r.pure+=this.damages[i]);var n=new a.a(this.creature,r,1,[],e);t.takeDamage(n)}},{trigger:"onQuery",directions:[1,1,1,1,1,1],_targetTeam:n.a.Both,require:function(){return!!this.testRequirements()&&!!this.testDirection({team:this._targetTeam,directions:this.directions})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,directions:this.directions})},activate:function(t,r){this.end();var i=u.e(t).creature,a=5-(this.isUpgraded()&&i.isFrozen()?0:i.size),n=[];switch(r.direction){case 0:n=e.grid.getHexMap(i.x,i.y-8,0,i.flipped,s.f).reverse();break;case 1:n=e.grid.getHexMap(i.x,i.y,0,i.flipped,s.r);break;case 2:n=e.grid.getHexMap(i.x,i.y,0,i.flipped,s.e);break;case 3:n=e.grid.getHexMap(i.x,i.y,-4,i.flipped,s.f);break;case 4:n=e.grid.getHexMap(i.x,i.y,0,!i.flipped,s.r);break;case 5:n=e.grid.getHexMap(i.x,i.y-8,-4,i.flipped,s.e).reverse()}var c=i.hexagons[0];i.moveTo(c,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){e.activeCreature.queryMove()},animation:"push"}),e.Phaser.camera.shake(.01,500,!0,e.Phaser.camera.SHAKE_VERTICAL,!0),n=n.slice(0,a+1);for(var o=0;o<n.length&&n[o].isWalkable(i.size,i.id,!0);o++)c=n[o];i.moveTo(c,{ignoreMovementPoint:!0,ignorePath:!0,callback:function(){e.activeCreature.queryMove()},animation:"push"}),e.Phaser.camera.shake(.01,500,!0,e.Phaser.camera.SHAKE_VERTICAL,!0)}},{trigger:"onQuery",_targetTeam:n.a.Enemy,require:function(){return!!this.testRequirements()&&!!this.testDirection({team:this._targetTeam,directions:this.directions})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,directions:[1,1,1,1,1,1]})},activate:function(t,r){var n=this;n.end();var s=u.e(t).creature,c=e.animations.projectile(this,s,"effects_freezing-spit",t,r,52,-20),o=c[0],h=c[1],d=c[2];o.onComplete.add((function(){this.destroy();var t=i.extend({},n.damages);t.crush+=3*d;var r=new a.a(n.creature,t,1,[],e),u=s.takeDamage(r);n.isUpgraded()&&u.damageObj.melee&&s.freeze()}),h)},getAnimationData:function(){return{duration:500,delay:0,activateAnimation:!1}}}]}}}]);