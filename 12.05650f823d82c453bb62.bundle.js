(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{331:function(e,t,r){"use strict";r.r(t);var i=r(0),a=r(120),n=r(24),s=r(48),c=r(8),u=r(989);t.default=function(e){e.abilities[37]=[{trigger:"onCreatureMove",require:function(t){return!!this.testRequirements()&&(null==t&&(t=this.creature.hexagons[0]),this.message="",t.trap&&"mud-bath"==t.trap.type?(e.UI.abilitiesButtons[0].changeState("noclick"),!0):(this.message="Not in a mud bath.",this.creature.effects.forEach((function(e){"mud-bath"==e.trigger&&e.deleteEffect()})),!1))},activate:function(){var t=i.extend({},this.effects[0]);if(this.isUpgraded())for(var r in t)({}).hasOwnProperty.call(t,r)&&(t[r]=2*t[r]);var a=new u.a("Spa Goggles",this.creature,this.creature,"mud-bath",{alterations:t},e);this.creature.addEffect(a);var n,s="%CreatureName"+this.creature.id+"%'s ",c=!0;for(var o in t)({}).hasOwnProperty.call(t,o)&&(c||(s+="and "),s+=o+" ",c=!1,n=t[o]);s+="+"+n,e.log(s)}},{trigger:"onQuery",_targetTeam:n.a.Enemy,require:function(){return!!this.testRequirements()&&!!this.atLeastOneTarget(this.creature.adjacentHexes(1),{team:this._targetTeam})},query:function(){var t=this,r=this.creature;e.grid.queryDirection({fnOnConfirm:function(){t.animation.apply(t,arguments)},flipped:r.player.flipped,team:this._targetTeam,id:r.id,requireCreature:!0,x:r.x,y:r.y,sourceCreature:r,stopOnCreature:!1,distance:1})},activate:function(t,r){this.end();var i=c.e(t).creature,n=new a.a(this.creature,this.damages,1,[],e);if(!i.takeDamage(n).kill){var s=e.grid.getHexLine(i.x,i.y,r.direction,i.flipped);s.splice(0,1);for(var u=null,o=0;o<s.length&&s[o].isWalkable(i.size,i.id,!0)&&(u=s[o],this.isUpgraded());o++){for(var g=!0,h=0;h<i.size;h++){var d=e.grid.hexes[u.y][u.x-h];if(!d.trap||"mud-bath"!==d.trap.type){g=!1;break}}if(!g)break}null!==u&&i.moveTo(u,{callback:function(){e.activeCreature.queryMove()},ignoreMovementPoint:!0,ignorePath:!0,overrideSpeed:1200,animation:"push"})}}},{trigger:"onQuery",_targetTeam:n.a.Enemy,require:function(){if(!this.testRequirements())return!1;var t=s.d,r=s.r,i=this.creature,a=c.c(e.grid.getHexMap(i.x,i.y-2,0,!1,t),!0,!0,i.id,i.team).concat(c.c(e.grid.getHexMap(i.x,i.y,0,!1,r),!0,!0,i.id,i.team),c.c(e.grid.getHexMap(i.x,i.y,0,!1,t),!0,!0,i.id,i.team),c.c(e.grid.getHexMap(i.x,i.y-2,0,!0,t),!0,!0,i.id,i.team),c.c(e.grid.getHexMap(i.x,i.y,0,!0,r),!0,!0,i.id,i.team),c.c(e.grid.getHexMap(i.x,i.y,0,!0,t),!0,!0,i.id,i.team));return!!this.atLeastOneTarget(a,{team:this._targetTeam})},query:function(){var t=s.d,r=s.r,i=this,a=this.creature,n=[e.grid.getHexMap(a.x,a.y-2,0,!1,t),e.grid.getHexMap(a.x,a.y,0,!1,r),e.grid.getHexMap(a.x,a.y,0,!1,t),e.grid.getHexMap(a.x,a.y-2,0,!0,t),e.grid.getHexMap(a.x,a.y,0,!0,r),e.grid.getHexMap(a.x,a.y,0,!0,t)];n.forEach((function(e){c.c(e,!0,!0,a.id)})),e.grid.queryChoice({fnOnConfirm:function(){i.animation.apply(i,arguments)},team:this._targetTeam,requireCreature:1,id:a.id,flipped:a.flipped,choices:n})},activate:function(t){this.end();var r=c.e(t).creature;if(this.isUpgraded()){var i=new u.a("Ground Ball",this.creature,r,"onDamage",{alterations:{meditation:-1}},e);r.addEffect(i),e.log("%CreatureName"+r.id+"%'s meditation is lowered by 1")}var n=new a.a(this.creature,this.damages,1,[],e);r.takeDamage(n)}},{trigger:"onQuery",_energyNormal:30,_energySelfUpgraded:10,require:function(){return this.isUpgraded()?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.testRequirements()},query:function(){var t=this,r=this.creature,i=[];this.isUpgraded()&&this.creature.energy<this._energyNormal||(i=e.grid.getFlyingRange(r.x,r.y,50,1,0)),i.push(e.grid.hexes[r.y][r.x]),e.grid.queryHexes({fnOnCancel:function(){e.activeCreature.queryMove()},fnOnConfirm:function(){t.animation.apply(t,arguments)},hexes:i,hideNonTarget:!0})},activate:function(t){var r=this.creature,i=t.x===r.x&&t.y===r.y;this.isUpgraded()&&i?(this.requirements={energy:this._energySelfUpgraded},this.costs={energy:this._energySelfUpgraded}):(this.requirements={energy:this._energyNormal},this.costs={energy:this._energyNormal}),this.end();var a=[new u.a("Slow Down",this.creature,t,"onStepIn",{requireFn:function(){return!!this.trap.hex.creature&&"A1"!=this.trap.hex.creature.type},effectFn:function(e,t){t.remainingMove--}},e)];t.createTrap("mud-bath",a,this.creature.player),i&&e.onCreatureMove(r,t)}}]}},989:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(3),a=r.n(i),n=r(4),s=r.n(n),c=r(0),u=r(5),o=function(){function e(t,r,i,n,s,u){a()(this,e),this.id=u.effectId++,this.game=u,this.name=t,this.owner=r,this.target=i,this.trigger=n,this.creationTurn=u.turn;var o=c.extend({requireFn:function(){return!0},effectFn:function(){},alterations:{},turnLifetime:0,deleteTrigger:"onStartOfRound",stackable:!0,noLog:!1,specialHint:void 0,deleteOnOwnerDeath:!1},s);c.extend(this,o),u.effects.push(this)}return s()(e,[{key:"animation",value:function(){this.activate.apply(this,arguments)}},{key:"activate",value:function(e){if(!this.requireFn(e))return!1;this.noLog||console.log("Effect "+this.name+" triggered"),e instanceof u.a&&e.addEffect(this),this.effectFn(this,e)}},{key:"deleteEffect",value:function(){var e=this.target.effects.indexOf(this);this.target.effects[e]?this.target.effects.splice(e,1):console.warn("Failed to find effect on target.",this);var t=this.game.effects.indexOf(this);this.game.effects[t]?this.game.effects.splice(t,1):console.warn("Failed to find effect on game.",this),this.target.updateAlteration()}}]),e}()}}]);